<!DOCTYPE html>
<html>
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="/styles.css">
      <script src="script.js" defer></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />

    </head>

    <body id="containerBody" onload="onload()">

        <header>
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Gamescom_logo_%282014-2022%29.svg/2560px-Gamescom_logo_%282014-2022%29.svg.png" width="125" height="110"><div class="header"></div>
        </header>

        <div class="topnav" id="nav">
            <ul>
                <a href="homeAdmin.html">Home</a>
                <% if(username=='admin') { %>
                    <a onclick="window.location.href = 'updateUsers.html'">Update Users</a>
                    <a onclick="window.location.href = 'updateEvent.html'">Update Events</a>
                    <a class="active" onclick="window.location.href = 'updateReservation.html'">Update Reservations</a>
                    <a onclick="window.location.href = 'updateAbout.html'">Update Info</a>
                    <a onclick="window.location.href = '/'" style="color: rgb(226, 86, 43);">Home User</a>
                    <% } %>
                <% if (loggedIn) { %>
                    <a id="signup" href="/logout">Log Out</a>
                    <a id="signup" href="/profile.html">Username: <%= username %></a>
                  <% } else { %>
                    <a id="signup" onclick="document.getElementById('id02').style.display='block'">Log In</a>
                    <a id="signup" onclick="document.getElementById('id01').style.display='block'">Sign Up</a>
                  <% } %>
                  <a id="mode" onclick="darkmode()"></a>
                <a href="javascript:void(0);" class="icon" onclick="myFunction()">&#9776;</a>

            </ul>
          </div>

        <div class="wrapper">
            <div class="info-box">
                <h1 style="text-decoration: underline;">Reservations</h1>
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <% var categorizedReservations = {}; %>
                    <% reservations.forEach(function(reservations) {
                        if (!categorizedReservations[reservations.eventname]) {
                            categorizedReservations[reservations.eventname] = [];
                        }
                        categorizedReservations[reservations.eventname].push(reservations);
                    }); %>
            
                    <% for (var eventname in categorizedReservations) { %>
                        <% categorizedReservations[eventname].forEach(function(reservations) { %>
                            <div style="display: flex; align-items: center; margin-bottom: 5px;">
                                <span onclick="window.location.href = 'updateReservationInfo.html?id=<%= reservations.id %>'" style="cursor: pointer; background-color: blueviolet; color: rgb(235, 234, 236); font-size: 20px; font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; margin-right: 15px; border: 1px solid blueviolet; padding: 5px 10px; border-radius: 5px;" ><%= reservations.eventname %> - <%= reservations.username %></span>
                                <button onclick="window.location.href = '/deleteReservation?id=<%= reservations.id %>'" style="background-color: red; color: white; border-radius: 5px; margin-left: 10px; padding: 5px 10px; font-size: 14px; font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Delete</button>
                            </div>
                        <% }); %>
                    <% } %>
               
             </div>
    
            </div>

        </div>

        <footer>
            <div class="flex-container">
                <div style="flex-grow: 2; align-self: center;">
                    <h1 id="footer">Social Media:</h1>
                    <a href="https://www.facebook.com/ds.unipi.gr" class="fa fa-facebook"></a>
                    <a href="https://twitter.com/dsunipigr" class="fa fa-twitter"></a>
                    <a href="https://instagram.com/unipi.ds?igshid=YmMyMTA2M2Y=" class="fa fa-instagram"></a>
                </div>
                <div style="flex-grow: 2;align-self: center;">                           
                    <h1 id="footer">Στοιχεια Επικοινωνιας</h1>
                    <p> Διευθυνση: Δρομος, Πολη, Χωρα</p>
                    <p>Τηλεφωνο:<a href="tel:+1234-567-8910"> 123-456-7899</a> </p>
                    <p>E-mail:<a href="mailto: someone@example.com"> someone@example.com</a></p>
                </div>
            </div>
        </footer>

    </body>

</html>